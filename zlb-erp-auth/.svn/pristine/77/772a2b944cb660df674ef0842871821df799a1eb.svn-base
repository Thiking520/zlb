package com.zhilianbao.erp.auth.listenner;


import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.springframework.context.ApplicationListener;
import org.springframework.context.event.ContextRefreshedEvent;
import org.springframework.stereotype.Service;

import com.zhilianbao.erp.auth.impl.parameter.ParamInit;

/**
 * @company zhilianbao
 * @author kuangzengye
 * @date   2017年3月9日 下午11:14:25
 * @description 初始化数据
 * @Version 1.0
 */
@Service
public class InitListener implements ApplicationListener<ContextRefreshedEvent> {
	
	private static final Logger logger=LogManager.getLogger(InitListener.class);

	@Override
	public void onApplicationEvent(ContextRefreshedEvent event) {
		try{
			logger.info("开始加载参数字典到缓存.....");
			
			//redis缓存参数
			ParamInit.updateParamCacheData();
			
			//redis缓存字典
			ParamInit.updateDictCacheData();
			
			logger.info("加载全局参数及数据字典到缓存完成!");
		}catch(Exception e){
			logger.error("加载全局参数及数据字典到缓存失败，原因：", e);
		}
		
	}

   
}
