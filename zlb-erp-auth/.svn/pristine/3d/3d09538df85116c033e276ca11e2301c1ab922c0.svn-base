package com.zhilianbao.erp.auth.cache;

import java.text.MessageFormat;

import com.zhilianbao.erp.common.constant.Constants;
import com.zhilianbao.erp.common.redis.RedisCache;

/**
* @company zhilianbao
* @author chengjianhui
* @date 2017年4月19日下午3:05:46
* @description:用户相关操作缓存工具类
*/
public class UserCacheUtil {
	
	public static final String USER_HASH_KEY = "AUTH:User:UserId:{0}";
	//用户在SSO 用户中心系统生成的token
	public static final String USER_SSO_TOKEN = "ssoToken";
	//用户在SSO 用户中心系统生成的ID
	public static final String USER_SSO_CENTER_ID = "ucenterId";
	
	/**
	* @Title: getUserKey
	* @author chengjianhui
	* @date 2017年4月28日上午10:58:47
	* @param userId
	* @return String
	* @description:获取用户缓存key
	*/
	private static String getUserKey(Long userId){
		return MessageFormat.format(USER_HASH_KEY, userId.toString());
	}

	/**
	* @Title: saveUserSsoToken
	* @author chengjianhui
	* @date 2017年4月28日上午11:12:24
	* @param userId
	* @param token
	* @description:缓存SSO端用户的token值
	*/
	public static void saveUserSsoToken(Long userId,String token){
		RedisCache.hset(Constants.REDIS_SELECT_0,getUserKey(userId), USER_SSO_TOKEN, token);
	}
	
	/**
	* @Title: getUserSsoToken
	* @author chengjianhui
	* @date 2017年4月28日上午10:59:57
	* @return String
	* @description:获取用户在研发中心端的token
	*/
	public static String getUserSsoToken(Long userId){
		return RedisCache.hget(Constants.REDIS_SELECT_0, getUserKey(userId), USER_SSO_TOKEN);
	}
	
	/**
	* @Title: delUserInfo
	* @author chengjianhui
	* @date 2017年4月28日上午11:11:03
	* @param userId
	* @description:清除缓存用户对象
	*/
	public static void delUserInfo(Long userId){
		RedisCache.del(Constants.REDIS_SELECT_0, getUserKey(userId));
	}
	
}
